# Architecture Design
## Complete Infrastructure Architecture with AWS S3

## Visual Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INTERNET / USERS                                 â”‚
â”‚                    (Web Browsers, Mobile Devices)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTPS
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLOUDFRONT CDN (Global)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Edge Locations (Global Distribution)                            â”‚  â”‚
â”‚  â”‚  - Caches static assets (images, videos, fonts)                   â”‚  â”‚
â”‚  â”‚  - Caches API responses (5-15 min TTL)                           â”‚  â”‚
â”‚  â”‚  - SSL/TLS termination                                           â”‚  â”‚
â”‚  â”‚  - Compression (Gzip/Brotli)                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                       â”‚
                    â–¼                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   VERCEL          â”‚   â”‚   AWS S3 BUCKET   â”‚
        â”‚   (Frontend)      â”‚   â”‚   (Media Storage) â”‚
        â”‚                   â”‚   â”‚                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚ Next.js App â”‚  â”‚   â”‚  â”‚  Images     â”‚  â”‚
        â”‚  â”‚ (Static)    â”‚  â”‚   â”‚  â”‚  Videos     â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚  Documents  â”‚  â”‚
        â”‚                   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚  â”‚ API Routes  â”‚  â”‚
        â”‚  â”‚ (Serverless)â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚ Edge Cache  â”‚  â”‚
        â”‚  â”‚ (Built-in)  â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚
        â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SUPABASE    â”‚      â”‚  AWS LAMBDA   â”‚
â”‚   (Database)  â”‚      â”‚  (Functions)   â”‚
â”‚               â”‚      â”‚               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚PostgreSQL â”‚ â”‚      â”‚ â”‚Image Opt  â”‚ â”‚
â”‚ â”‚Database   â”‚ â”‚      â”‚ â”‚(Sharp)    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚      â”‚               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Auth       â”‚ â”‚      â”‚ â”‚Upload     â”‚ â”‚
â”‚ â”‚(Optional) â”‚ â”‚      â”‚ â”‚Handler    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚      â”‚               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Realtime   â”‚ â”‚      â”‚ â”‚Transform  â”‚ â”‚
â”‚ â”‚(Optional) â”‚ â”‚      â”‚ â”‚(Optional) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Architecture

### Layer 1: Presentation Layer (Frontend)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VERCEL PLATFORM                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           Next.js 14+ Application              â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚  â”‚   Pages      â”‚  â”‚  Components  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  - Home      â”‚  â”‚  - Hero      â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  - Events    â”‚  â”‚  - EventCard â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  - Team      â”‚  â”‚  - MediaGrid â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  - Gallery   â”‚  â”‚  - Calendar  â”‚           â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚  â”‚  API Routes  â”‚  â”‚  Middleware  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  /api/events â”‚  â”‚  - Auth     â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  /api/media  â”‚  â”‚  - CORS     â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  /api/upload â”‚  â”‚  - RateLimitâ”‚           â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚  â”‚      Next.js Image Optimization      â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  - Automatic WebP/AVIF conversion    â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  - Lazy loading                      â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  - Responsive images                 â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  - Blur placeholders                  â”‚      â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Vercel Edge Network (Global CDN)         â”‚
â”‚  â”‚  - Static asset caching (1 year TTL)            â”‚    â”‚
â”‚  â”‚  - API response caching (5-15 min TTL)          â”‚    â”‚
â”‚  â”‚  - Automatic compression                        â”‚    â”‚
â”‚  â”‚  - DDoS protection                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities**:
- Serve Next.js application
- Handle API requests
- Image optimization (Next.js Image)
- Edge caching
- Automatic deployments

**Cost**: $0 (free tier) â†’ $20/month (Pro)

---

### Layer 2: Content Delivery Network (CDN)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CLOUDFRONT DISTRIBUTION                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Origin Configuration                     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Origin 1: S3 Bucket (Media)                      â”‚   â”‚
â”‚  â”‚    - Domain: media.hoadao.com                     â”‚   â”‚
â”‚  â”‚    - Path: /media/*                               â”‚   â”‚
â”‚  â”‚    - Cache: 1 year (static assets)                â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Origin 2: Vercel (API)                           â”‚   â”‚
â”‚  â”‚    - Domain: api.hoadao.com                       â”‚   â”‚
â”‚  â”‚    - Path: /api/*                                 â”‚   â”‚
â”‚  â”‚    - Cache: 5-15 minutes (API responses)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Cache Behaviors                          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Behavior 1: Images/Videos                        â”‚   â”‚
â”‚  â”‚    - TTL: 31536000 (1 year)                       â”‚   â”‚
â”‚  â”‚    - Compress: Yes                                â”‚   â”‚
â”‚  â”‚    - Headers: Cache-Control, ETag                 â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Behavior 2: API Responses                        â”‚   â”‚
â”‚  â”‚    - TTL: 300-900 (5-15 min)                     â”‚   â”‚
â”‚  â”‚    - Compress: Yes                                â”‚   â”‚
â”‚  â”‚    - Headers: Vary: Accept-Encoding              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Edge Locations (Global)                   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ğŸŒ US East, US West, EU, Asia Pacific             â”‚   â”‚
â”‚  â”‚  - Automatic routing to nearest edge               â”‚   â”‚
â”‚  â”‚  - Low latency delivery                           â”‚   â”‚
â”‚  â”‚  - High availability                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities**:
- Global content distribution
- Caching static assets
- Caching API responses
- Compression
- SSL/TLS termination

**Cost**: $0 (free tier, 50GB/month) â†’ $8-30/month (production)

---

### Layer 3: Media Storage (S3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AWS S3 BUCKET: hoadao-media                   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Bucket Structure                         â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  /images/                                          â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ events/                                     â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ 2024/                                   â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â”œâ”€â”€ chinese-new-year/                   â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â”‚   â”œâ”€â”€ hero.jpg                        â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â”‚   â””â”€â”€ gallery/                       â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â””â”€â”€ ...                                 â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ team/                                       â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ member-1.jpg                            â”‚   â”‚
â”‚  â”‚    â”‚   â””â”€â”€ member-2.jpg                            â”‚   â”‚
â”‚  â”‚    â””â”€â”€ gallery/                                    â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  /videos/                                          â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ performances/                               â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ 2024/                                   â”‚   â”‚
â”‚  â”‚    â”‚   â””â”€â”€ ...                                     â”‚   â”‚
â”‚  â”‚    â””â”€â”€ highlights/                                â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  /thumbnails/                                      â”‚   â”‚
â”‚  â”‚    â””â”€â”€ (auto-generated)                            â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  /optimized/                                       â”‚   â”‚
â”‚  â”‚    â””â”€â”€ (processed images)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Storage Classes                          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Standard (Active)                                 â”‚   â”‚
â”‚  â”‚    - Recent uploads (0-90 days)                   â”‚   â”‚
â”‚  â”‚    - Frequently accessed                           â”‚   â”‚
â”‚  â”‚    - Cost: $0.023/GB-month                        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Intelligent-Tiering (Archive)                     â”‚   â”‚
â”‚  â”‚    - Older content (90-365 days)                  â”‚   â”‚
â”‚  â”‚    - Infrequently accessed                        â”‚   â”‚
â”‚  â”‚    - Cost: $0.0125/GB-month                       â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Glacier (Long-term)                              â”‚   â”‚
â”‚  â”‚    - Archived content (>365 days)                 â”‚   â”‚
â”‚  â”‚    - Rarely accessed                              â”‚   â”‚
â”‚  â”‚    - Cost: $0.004/GB-month                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Lifecycle Policies                        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Policy 1: Move to Intelligent-Tiering            â”‚   â”‚
â”‚  â”‚    - After: 90 days                                â”‚   â”‚
â”‚  â”‚    - Savings: ~45%                                 â”‚   â”‚
â”‚  â”‚ â”‚                                                     â”‚   â”‚
â”‚  â”‚  Policy 2: Move to Glacier                         â”‚   â”‚
â”‚  â”‚    - After: 365 days                               â”‚   â”‚
â”‚  â”‚    - Savings: ~83%                                 â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Policy 3: Delete old versions                     â”‚   â”‚
â”‚  â”‚    - After: 30 days                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities**:
- Store media files (images, videos)
- Organize content by type/date
- Automatic lifecycle management
- Version control
- Access control (via CloudFront)

**Cost**: $0 (free tier, 5GB) â†’ $2-7/month (100-300GB)

---

### Layer 4: Database Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SUPABASE (PostgreSQL)                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Database Schema                          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“Š events                                          â”‚   â”‚
â”‚  â”‚    - id (uuid)                                     â”‚   â”‚
â”‚  â”‚    - title (text)                                  â”‚   â”‚
â”‚  â”‚    - description (text)                            â”‚   â”‚
â”‚  â”‚    - start_date (timestamp)                        â”‚   â”‚
â”‚  â”‚    - end_date (timestamp)                          â”‚   â”‚
â”‚  â”‚    - location (text)                               â”‚   â”‚
â”‚  â”‚    - category (enum)                               â”‚   â”‚
â”‚  â”‚    - image_url (text) â†’ S3 URL                    â”‚   â”‚
â”‚  â”‚    - video_url (text) â†’ S3 URL                    â”‚   â”‚
â”‚  â”‚    - created_at (timestamp)                        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ğŸ‘¥ team_members                                  â”‚   â”‚
â”‚  â”‚    - id (uuid)                                     â”‚   â”‚
â”‚  â”‚    - name (text)                                   â”‚   â”‚
â”‚  â”‚    - role (text)                                   â”‚   â”‚
â”‚  â”‚    - bio (text)                                    â”‚   â”‚
â”‚  â”‚    - image_url (text) â†’ S3 URL                     â”‚   â”‚
â”‚  â”‚    - social_links (jsonb)                          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“¸ media_gallery                                 â”‚   â”‚
â”‚  â”‚    - id (uuid)                                     â”‚   â”‚
â”‚  â”‚    - type (enum: image/video)                     â”‚   â”‚
â”‚  â”‚    - s3_key (text)                                â”‚   â”‚
â”‚  â”‚    - s3_url (text)                                â”‚   â”‚
â”‚  â”‚    - thumbnail_url (text)                         â”‚   â”‚
â”‚  â”‚    - title (text)                                 â”‚   â”‚
â”‚  â”‚    - description (text)                            â”‚   â”‚
â”‚  â”‚    - event_id (uuid, FK)                          â”‚   â”‚
â”‚  â”‚    - created_at (timestamp)                        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“… calendar_entries                               â”‚   â”‚
â”‚  â”‚    - id (uuid)                                     â”‚   â”‚
â”‚  â”‚    - event_id (uuid, FK)                          â”‚   â”‚
â”‚  â”‚    - date (date)                                   â”‚   â”‚
â”‚  â”‚    - time (time)                                   â”‚   â”‚
â”‚  â”‚    - recurring_pattern (jsonb)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Features                                  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  âœ… PostgreSQL 15                                  â”‚   â”‚
â”‚  â”‚  âœ… Row Level Security (RLS)                      â”‚   â”‚
â”‚  â”‚  âœ… Real-time subscriptions (optional)             â”‚   â”‚
â”‚  â”‚  âœ… Full-text search                              â”‚   â”‚
â”‚  â”‚  âœ… Automatic backups                              â”‚   â”‚
â”‚  â”‚  âœ… Point-in-time recovery                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities**:
- Store application data
- Manage relationships
- Provide API access
- Handle authentication (optional)
- Real-time updates (optional)

**Cost**: $0 (free tier, 500MB) â†’ $25/month (Pro, 8GB)

---

## Data Flow Diagrams

### Flow 1: User Views Event Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚
â”‚ Browser â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Request: GET /events/chinese-new-year
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudFront CDN â”‚
â”‚  (Edge Cache)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Check cache
     â”‚    â”œâ”€ Hit? â†’ Return cached (fast)
     â”‚    â””â”€ Miss? â†’ Continue
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vercel         â”‚
â”‚  (Next.js App)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. API Call: GET /api/events/:id
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase       â”‚
â”‚  (Database)     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Query: SELECT * FROM events WHERE id = :id
     â”‚    Returns: { title, description, image_url, ... }
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vercel         â”‚
â”‚  (API Route)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Response with S3 URLs
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudFront     â”‚
â”‚  (Cache & CDN)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. Cache response (5-15 min)
     â”‚    Return to user
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚
â”‚ Browser â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flow 2: User Views Event Image

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚
â”‚ Browser â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Request: GET /images/events/cny-2024.jpg
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudFront CDN â”‚
â”‚  (Edge Cache)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Check cache (1 year TTL)
     â”‚    â”œâ”€ Hit? â†’ Return cached image (fast)
     â”‚    â””â”€ Miss? â†’ Continue
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS S3 Bucket  â”‚
â”‚  (Origin)       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. Fetch: s3://hoadao-media/images/events/cny-2024.jpg
     â”‚
     â”‚ 4. Return image
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudFront     â”‚
â”‚  (Cache & CDN)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Cache image (1 year)
     â”‚    Compress (Gzip/Brotli)
     â”‚    Return to user
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚
â”‚ Browser â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flow 3: Admin Uploads Media

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin  â”‚
â”‚ Browser â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Upload: POST /api/upload
     â”‚    FormData: { file, event_id, ... }
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vercel         â”‚
â”‚  (API Route)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Validate file
     â”‚    - Check size, type
     â”‚    - Generate unique key
     â”‚
     â”‚ 3. Optional: Optimize image
     â”‚    - Use Sharp library
     â”‚    - Resize, convert to WebP
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS S3         â”‚
â”‚  (Upload)       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. PUT Object
     â”‚    Bucket: hoadao-media
     â”‚    Key: images/events/2024/uuid-filename.webp
     â”‚    ACL: Private (via CloudFront)
     â”‚
     â”‚ 5. Return S3 URL
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase       â”‚
â”‚  (Database)     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. INSERT INTO media_gallery
     â”‚    (s3_key, s3_url, event_id, ...)
     â”‚
     â”‚ 7. Return CloudFront URL to client
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin  â”‚
â”‚ Browser â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Network Architecture

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Internet Users    â”‚
                    â”‚  (Global Access)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTPS (Port 443)
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                             â”‚
                â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CloudFront CDN       â”‚    â”‚  Vercel Edge Network  â”‚
    â”‚  (media.hoadao.com)   â”‚    â”‚  (app.hoadao.com)     â”‚
    â”‚                       â”‚    â”‚                       â”‚
    â”‚  - Edge Locations     â”‚    â”‚  - Edge Locations     â”‚
    â”‚  - SSL/TLS            â”‚    â”‚  - SSL/TLS            â”‚
    â”‚  - Compression        â”‚    â”‚  - Compression        â”‚
    â”‚  - Caching            â”‚    â”‚  - Caching            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                             â”‚
                â”‚                             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       â”‚    â”‚                       â”‚
    â–¼                       â–¼    â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  S3       â”‚      â”‚  S3       â”‚  â”‚  Vercel  â”‚  â”‚  Vercel  â”‚
â”‚  Bucket  â”‚      â”‚  Bucket   â”‚  â”‚  Server  â”‚  â”‚  Server  â”‚
â”‚  (US-E)  â”‚      â”‚  (EU-W)   â”‚  â”‚  (US)    â”‚  â”‚  (EU)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                       â”‚            â”‚            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚            â”‚
                â”‚                        â”‚            â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Supabase    â”‚
                    â”‚  (Database)   â”‚
                    â”‚  (US Region)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                          â”‚
â”‚                                                             â”‚
â”‚  Layer 1: CloudFront (DDoS Protection)                     â”‚
â”‚    âœ… AWS Shield Standard (free)                           â”‚
â”‚    âœ… Rate limiting                                        â”‚
â”‚    âœ… WAF rules (optional)                                 â”‚
â”‚                                                             â”‚
â”‚  Layer 2: Vercel (Application Security)                    â”‚
â”‚    âœ… Automatic HTTPS                                      â”‚
â”‚    âœ… DDoS protection                                     â”‚
â”‚    âœ… Environment variables (secrets)                      â”‚
â”‚                                                             â”‚
â”‚  Layer 3: S3 (Storage Security)                            â”‚
â”‚    âœ… Private buckets (no public access)                   â”‚
â”‚    âœ… Access via CloudFront only                           â”‚
â”‚    âœ… IAM policies                                        â”‚
â”‚    âœ… Encryption at rest (AES-256)                        â”‚
â”‚    âœ… Encryption in transit (TLS)                         â”‚
â”‚                                                             â”‚
â”‚  Layer 4: Supabase (Database Security)                     â”‚
â”‚    âœ… Row Level Security (RLS)                            â”‚
â”‚    âœ… SSL connections                                     â”‚
â”‚    âœ… API keys (environment variables)                    â”‚
â”‚    âœ… Automatic backups                                   â”‚
â”‚                                                             â”‚
â”‚  Layer 5: Application Security                             â”‚
â”‚    âœ… Input validation (Zod)                             â”‚
â”‚    âœ… CORS configuration                                  â”‚
â”‚    âœ… Rate limiting (API routes)                          â”‚
â”‚    âœ… File type validation                                â”‚
â”‚    âœ… File size limits                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Next.js    â”‚
â”‚   Frontend   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ API Calls
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Vercel API Routes          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  /api/events              â”‚  â”‚
â”‚  â”‚  /api/media               â”‚  â”‚
â”‚  â”‚  /api/upload              â”‚  â”‚
â”‚  â”‚  /api/team                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                 â”‚                 â”‚
       â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase â”‚    â”‚   S3     â”‚    â”‚ Lambda   â”‚
â”‚ Database â”‚    â”‚ Storage  â”‚    â”‚(Optional)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                 â”‚
       â”‚                 â”‚                 â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   CloudFront     â”‚
              â”‚   (CDN Cache)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Storage Architecture Detail

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              S3 BUCKET: hoadao-media                        â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ Root Structure                                         â”‚
â”‚  â”œâ”€â”€ images/                                               â”‚
â”‚  â”‚   â”œâ”€â”€ events/                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ 2024/                                         â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ 01-january/                              â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chinese-new-year/                    â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hero.webp                        â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ gallery/                         â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ img-001.webp                 â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ img-002.webp                 â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ thumbnails/                      â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ hero-thumb.webp               â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...                                  â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ 02-february/                             â”‚
â”‚  â”‚   â”‚   â””â”€â”€ ...                                           â”‚
â”‚  â”‚   â”œâ”€â”€ team/                                             â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ member-001.webp                              â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ member-002.webp                              â”‚
â”‚  â”‚   â”‚   â””â”€â”€ ...                                           â”‚
â”‚  â”‚   â””â”€â”€ gallery/                                          â”‚
â”‚  â”‚       â””â”€â”€ ...                                           â”‚
â”‚  â”‚                                                         â”‚
â”‚  â”œâ”€â”€ videos/                                               â”‚
â”‚  â”‚   â”œâ”€â”€ performances/                                     â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ 2024/                                         â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ cny-2024-performance.mp4                 â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ ...                                       â”‚
â”‚  â”‚   â”‚   â””â”€â”€ ...                                           â”‚
â”‚  â”‚   â””â”€â”€ highlights/                                       â”‚
â”‚  â”‚       â””â”€â”€ ...                                           â”‚
â”‚  â”‚                                                         â”‚
â”‚  â””â”€â”€ documents/                                            â”‚
â”‚      â””â”€â”€ (if needed)                                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š Storage Class Distribution                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Standard:          70% (active content)              â”‚  â”‚
â”‚  â”‚  Intelligent-Tier:  25% (archive content)          â”‚  â”‚
â”‚  â”‚  Glacier:           5% (long-term archive)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Cost Breakdown by Component

### Monthly Costs (1-5GB/day traffic)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component              â”‚  Cost/Month  â”‚  % of Total  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vercel Pro             â”‚  $20.00      â”‚  36%         â”‚
â”‚  Supabase Pro           â”‚  $25.00      â”‚  45%         â”‚
â”‚  AWS S3 Storage         â”‚  $2.30       â”‚  4%          â”‚
â”‚  CloudFront CDN         â”‚  $8.50       â”‚  15%         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TOTAL                  â”‚  $55.80      â”‚  100%        â”‚
â”‚  Daily Cost             â”‚  $1.86       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Monthly Costs (10GB/day traffic)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component              â”‚  Cost/Month  â”‚  % of Total  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vercel Pro             â”‚  $20.00      â”‚  26%         â”‚
â”‚  Supabase Pro           â”‚  $25.00      â”‚  33%         â”‚
â”‚  AWS S3 Storage         â”‚  $6.90       â”‚  9%          â”‚
â”‚  CloudFront CDN         â”‚  $25.50      â”‚  32%         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TOTAL                  â”‚  $77.40      â”‚  100%        â”‚
â”‚  Daily Cost             â”‚  $2.58       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Development Flow                         â”‚
â”‚                                                             â”‚
â”‚  Developer                                                  â”‚
â”‚    â”‚                                                        â”‚
â”‚    â”‚ 1. git push origin main                                â”‚
â”‚    â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  GitHub         â”‚                                        â”‚
â”‚  â”‚  Repository     â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                  â”‚
â”‚           â”‚ 2. Webhook trigger                              â”‚
â”‚           â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  Vercel         â”‚                                        â”‚
â”‚  â”‚  CI/CD          â”‚                                        â”‚
â”‚  â”‚                 â”‚                                        â”‚
â”‚  â”‚  - Install deps â”‚                                        â”‚
â”‚  â”‚  - Build app    â”‚                                        â”‚
â”‚  â”‚  - Run tests    â”‚                                        â”‚
â”‚  â”‚  - Deploy       â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                                                  â”‚
â”‚           â”‚ 3. Deploy to                                    â”‚
â”‚           â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Preview        â”‚      â”‚  Production      â”‚              â”‚
â”‚  â”‚  Deployment     â”‚      â”‚  Deployment      â”‚              â”‚
â”‚  â”‚  (PR branches)  â”‚      â”‚  (main branch)   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Automatic Updates                                  â”‚   â”‚
â”‚  â”‚  - Zero-downtime deployments                       â”‚   â”‚
â”‚  â”‚  - Instant rollback                                â”‚   â”‚
â”‚  â”‚  - Preview URLs for PRs                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Monitoring & Observability

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Monitoring Stack                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vercel Analytics                                   â”‚   â”‚
â”‚  â”‚  - Web Vitals (LCP, FID, CLS)                      â”‚   â”‚
â”‚  â”‚  - Real User Monitoring                            â”‚   â”‚
â”‚  â”‚  - Performance metrics                             â”‚   â”‚
â”‚  â”‚  Cost: Included                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Sentry (Error Tracking)                           â”‚   â”‚
â”‚  â”‚  - Error monitoring                                â”‚   â”‚
â”‚  â”‚  - Performance monitoring                          â”‚   â”‚
â”‚  â”‚  - Release tracking                               â”‚   â”‚
â”‚  â”‚  Cost: Free tier (5,000 events/month)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AWS CloudWatch (Optional)                          â”‚   â”‚
â”‚  â”‚  - S3 metrics                                      â”‚   â”‚
â”‚  â”‚  - CloudFront metrics                              â”‚   â”‚
â”‚  â”‚  - Cost: $0-5/month                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Supabase Dashboard                                  â”‚   â”‚
â”‚  â”‚  - Database metrics                                 â”‚   â”‚
â”‚  â”‚  - Query performance                               â”‚   â”‚
â”‚  â”‚  - Cost: Included                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Scalability Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Scaling Strategy                               â”‚
â”‚                                                             â”‚
â”‚  Phase 1: MVP (0-1GB/day)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vercel:        Free tier                          â”‚   â”‚
â”‚  â”‚  Supabase:      Free tier (500MB)                  â”‚   â”‚
â”‚  â”‚  S3:            Free tier (5GB)                      â”‚   â”‚
â”‚  â”‚  CloudFront:   Free tier (50GB)                     â”‚   â”‚
â”‚  â”‚  Cost:         $0/month                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Phase 2: Growth (1-10GB/day)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vercel:        Pro ($20)                          â”‚   â”‚
â”‚  â”‚  Supabase:      Pro ($25)                          â”‚   â”‚
â”‚  â”‚  S3:            $2-7/month                           â”‚   â”‚
â”‚  â”‚  CloudFront:   $8-30/month                         â”‚   â”‚
â”‚  â”‚  Cost:         $55-82/month                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Phase 3: Scale (10-50GB/day)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vercel:        Pro or Enterprise                  â”‚   â”‚
â”‚  â”‚  Supabase:      Pro or Enterprise                  â”‚   â”‚
â”‚  â”‚  S3:            Intelligent-Tiering                  â”‚   â”‚
â”‚  â”‚  CloudFront:   Price Class optimization            â”‚   â”‚
â”‚  â”‚  Cost:         $100-200/month                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Phase 4: Large Scale (50GB+/day)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Consider:     Full AWS migration                  â”‚   â”‚
â”‚  â”‚  Cost:         $180-300/month (optimized)          â”‚   â”‚
â”‚  â”‚  Savings:      30-50% vs hybrid at scale           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Implementation Checklist

### Infrastructure Setup
- [ ] Create AWS account
- [ ] Create S3 bucket (hoadao-media)
- [ ] Configure S3 bucket policies
- [ ] Set up CloudFront distribution
- [ ] Configure CloudFront cache behaviors
- [ ] Set up S3 lifecycle policies
- [ ] Configure CORS for S3
- [ ] Set up Vercel account
- [ ] Connect GitHub repository
- [ ] Set up Supabase project
- [ ] Create database schema
- [ ] Configure environment variables

### Application Setup
- [ ] Initialize Next.js project
- [ ] Configure Next.js Image domains
- [ ] Set up S3 upload functionality
- [ ] Implement API routes
- [ ] Set up Supabase client
- [ ] Configure React Query
- [ ] Set up error monitoring (Sentry)
- [ ] Configure analytics (Vercel)

### Security Setup
- [ ] Configure S3 bucket as private
- [ ] Set up CloudFront origin access
- [ ] Configure CORS policies
- [ ] Set up environment variables
- [ ] Configure rate limiting
- [ ] Set up input validation
- [ ] Configure file upload limits

---

*Complete architecture design with AWS S3 integration.*  
*Visual diagrams show data flow, component interactions, and scaling strategy.*  
*Last updated: [Date]*


